function MyAudio(i){this.init(i)}var p=MyAudio.prototype;p.audioPlayer=null,p._musicList=[],p.audioFiles=null,p.audioFilesCount=0,p._volume=1,p._basePath="",p.bgPic="",p.bgPicCount=0,p.isAudioFileInit=!1,p.isBgFileInit=!1,p._isPlay=!1,p._isLoop=!0,p._currentIndex=0,p._bgFiles=null,p._bgFilesCount=0,p._currentBgIndex=0,p._bgOpacity=.5,p.init=function(i){this.audioPlayer=new Audio,this.setBasePath(i)},p.initAudioPlayer=function(i){},p.getAudioFileList=function(){var i=this;console.log("into get audio file list"),1==config.isPhp?$.get("php/audio.php",function(t){i.audioFiles=t.audioFiles,i.audioFilesCount=i.audioFiles.length,i._currentIndex=Math.floor(Math.random()*i.audioFilesCount),i.initAudioPlayer(decodeURIComponent(i.audioFiles[i._currentIndex])),i.isAudioFileInit=!0,console.log("get audio.php file success")},"json").fail(function(){console.log("get audio.php file fail"),i.audioFiles=config.defaultAudioFile,i.audioFilesCount=i.audioFiles.length,i._currentIndex=Math.floor(Math.random()*i.audioFilesCount),i.initAudioPlayer(i.audioFiles[i._currentIndex]),i.isAudioFileInit=!0,console.log("use the default file audio file list")}):(i.audioFiles=config.defaultAudioFile,i.audioFilesCount=i.audioFiles.length,i._currentIndex=Math.floor(Math.random()*i.audioFilesCount),i.initAudioPlayer(i.audioFiles[i._currentIndex]),i.isAudioFileInit=!0,console.log("use the default file audio file list"))},p.getBackgroundFileList=function(){var i=this;console.log("into get Background file list"),1==config.isPhp?$.get("php/audio.php",function(t){i._bgFiles=t.bgFiles,console.log(i._bgFiles),i._bgFilesCount=i._bgFiles.length,i._currentBgIndex=Math.floor(Math.random()*i._bgFilesCount),console.log("get audio.php file success")},"json").fail(function(){console.log("get audio.php file fail"),i._bgFiles=config.defaultBgFile,i._bgFilesCount=i._bgFiles.length,i._currentBgIndex=Math.floor(Math.random()*i._bgFilesCount),console.log("use the default file audio file list")}):(i._bgFiles=config.defaultBgFile,i._bgFilesCount=i._bgFiles.length,i._currentBgIndex=Math.floor(Math.random()*i._bgFilesCount),console.log("use the default file audio file list"))},p.getAudioFilesCount=function(){return this.audioFilesCount},p.changeSrc=function(i){this.audioPlayer.src=i},p.play=function(i){i&&(this.audioPlayer.pause(),this.changeSrc(this.getBasePath()+i)),this.audioPlayer.play(),this._isPlay=!0},p.playPre=function(){},p.playNext=function(){},p.isPlaying=function(){return this._isPlay},p.pause=function(){this.audioPlayer.pause()},p.isPaused=function(){return this.audioPlayer.paused},p.isEnded=function(){return this.audioPlayer.ended},p.playNextByRandom=function(){for(var i=this._currentIndex;;)if(i=Math.floor(Math.random()*this.audioFilesCount),i!=this._currentIndex)break;console.log("当前index:"+i),this._currentIndex=i,this.initAudioPlayer(this.audioFiles[this._currentIndex]),this.play()},p.isInit=function(){return this.isAudioFileInit},p.setMusicList=function(i){this._musicList=i},p.getBasePath=function(){return this._basePath},p.setBasePath=function(i){this._basePath=i},p.isLoop=function(){return this._isLoop},p.setLoop=function(i){console.log("set loop"),"boolean"==typeof this.audioPlayer.loop?(this.audioPlayer.loop=i,console.log("set loop by loop")):(i?this.audioPlayer.addEventListener("ended",this.play):this.audioPlayer.removeEventListener("ended",this.play),console.log("set loop by event")),this._isLoop=i},p.getVolume=function(){return this._volume},p.setVolume=function(i){this.audioPlayer.volume=this._volume=i},p.addVolume=function(i){this._volume<1&&(this._volume+=i,this._volume>1&&(this._volume=1),this.audioPlayer.volume=this._volume)},p.reduceVolume=function(i){this._volume>0&&(this._volume-=i,this._volume<0&&(this._volume=0),this.audioPlayer.volume=this._volume)},p.addBgOpacity=function(i){this._bgOpacity<.9&&(this._bgOpacity+=i,this._bgOpacity>.9&&(this._bgOpacity=.9))},p.reduceBgOpacity=function(i){this._bgOpacity>0&&(this._bgOpacity-=i,this._bgOpacity<0&&(this._bgOpacity=0))},p.getBgOpacity=function(){return this._bgOpacity},p.setBgOpacity=function(i){this._bgOpacity=i},p.getBgName=function(){return this._bgFiles[this._currentBgIndex]},p.getBgNameByRandom=function(){for(var i=this._currentBgIndex;;)if(i=Math.floor(Math.random()*this._bgFilesCount),i!=this._currentBgIndex)break;return this._currentBgIndex=i,this._bgFiles[this._currentBgIndex]},p.getBuffered=function(){return console.log(this.audioPlayer.buffered),this.audioPlayer.buffered},p.getDuration=function(){var i=parseInt(this.audioPlayer.duration);return this.getTimeFromSeconds(i)},p.getPlayed=function(){return console.log(this.audioPlayer.played),this.audioPlayer.played},p.getCurrentTime=function(){var i=parseInt(this.audioPlayer.currentTime);return this.getTimeFromSeconds(i)},p.getPercentOfCurentTime=function(){return this.audioPlayer.currentTime/this.audioPlayer.duration},p.addEvent=function(i,t){this.audioPlayer.addEventListener(i,t)},p.getTimeFromSeconds=function(i){if(86400>i){var t=new Date("01/01/2000 0:00");return t.setSeconds(i),this.formatTime(t)}return null},p.formatTime=function(i){var t=i.getHours(),e=i.getMinutes(),o=i.getSeconds(),n="";return t>0&&(n+=(t>9?t.toString():"0"+t.toString())+":"),n+=(e>9?e.toString():"0"+e.toString())+":",n+=o>9?o.toString():"0"+o.toString()};