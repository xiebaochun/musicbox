$(function(){function i(){var i=$(window).width();$(".music-lyric").css("left",188+$(".music-content").width()+"px"),$(".music-lyric").css("width",i-(188+$(".music-content").width())+"px"),s.updateCurPosition()}function t(i){async.series({music:function(i){u("http://xiebaochun.github.io/music-resource/music_list.json",i)}},function(i,t){var u=t.music.musics;c(u),n.setMusicList(u)})}function c(i){$(".music-items").empty(),$.each(i,function(i,t){var c='<div class="music-item"><div id="music-name">'+t.name+'</div><div id="music-author">'+t.author+"</div></div>",u=$(c);u.click(function(){$(".current-music-item").removeClass("current-music-item"),$(this).addClass("current-music-item"),$("#playing-song-info").html(t.name),n.play(t.file_name),e.init(t.name)}),$(".music-items").append(u)})}function u(i,t){$.ajax({url:i,method:"get",data:{},success:function(i){console.log(i),t(null,i)},dataType:"json"})}var n=new MyAudio("http://xiebaochun.github.io/music-resource/"),e=new Lyric,s=new Playback(n,e),o="";n.addEvent("timeupdate",function(){s.updateTimeData(),s.updateCurPosition(),o!=$("#cur").html()&&(o=$("#cur").html(),e.setItemColorByTime($("#cur").html()))}),setTimeout(function(){$("#loader").fadeOut()},0),t(),$("#baidu-music-box").click(function(){t()}),i(),$(window).resize(function(){i()})});